/**
 * Copyright (c) Corinvo, LLC. and its partners and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */

@use 'sass:list';
@use 'tokens' as *;
@use '../button/tokens' as *;
@use '../../utilities/disable-selection' as *;

@mixin SplitButton {
  .draco-split-button {
    // Disable unneeded selection
    @include disable-selection;

    display: inline-flex;
    align-items: stretch;
    position: relative;
    contain: layout style;

    // Prevent transforms on all buttons to prevent gaps
    .draco-split-button__primary,
    .draco-split-button__menu {
      // Override all button transform effects to prevent gaps
      &:hover,
      &:active {
        transform: translateZ(0) !important;
      }

      // For depth buttons, keep shadow but disable movement
      &.draco-button--depth {
        // Ensure base transform is set for GPU acceleration
        transform: translateZ(0) translate(0, 0) !important;

        &:hover,
        &:active {
          // Keep position fixed, no movement on interaction
          transform: translateZ(0) translate(0, 0) !important;
        }
      }
    }

    // Primary action button (left side)
    .draco-split-button__primary {
      border-top-right-radius: 0;
      border-bottom-right-radius: 0;
      border-right: none !important;
    }

    // Menu trigger button (right side)
    .draco-split-button__menu {
      border-top-left-radius: 0;
      border-bottom-left-radius: 0;
      min-width: 0 !important;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      position: relative;
      margin-left: $split-button-menu-margin-left;

      // Override icon-only button padding via CSS variable
      &.draco-button--icon-only {
        --draco-button-padding-horizontal: #{$split-button-menu-padding-horizontal};
        width: auto !important;
      }
    }
  }
}
