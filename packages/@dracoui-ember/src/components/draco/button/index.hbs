{{#let (or @isRouteExternal this.isExternal) as |external|}}
  <Draco::Interactive
    class={{this.classNames}}
    @current-when={{@current-when}}
    @models={{@model}}
    @query={{@query}}
    @replace={{@replace}}
    @route={{@route}}
    @isRouteExternal={{@isRouteExternal}}
    @href={{@href}}
    @isHrefExternal={{@isHrefExternal}}
    ...attributes
    data-size={{@size}}
    aria-label={{if this.isIconOnly this.text null}}
  >
    {{#if this.loading}}
      <Draco::LoadingDots />
    {{else}}
      {{#if this.isIconOnly}}
        {{#if this.icon}}
          <span class="draco-button__icon">
            <Draco::Icon @name={{this.icon}} @size={{this.iconSize}} />
          </span>
        {{/if}}
      {{else}}
        {{#if (eq this.iconPosition "leading")}}
          {{#if this.icon}}
            <span class="draco-button__icon">
              <Draco::Icon @name={{this.icon}} @size={{this.iconSize}} />
            </span>
          {{/if}}

          {{#if this.text}}
            <span class="draco-button__text">
              {{this.text}}
            </span>
          {{/if}}

          {{yield}}

          {{#if (and this.displayExternalIcon external)}}
            <Draco::Icon
              @size={{11}}
              @name="lucide:external-link"
              class="draco-button--external-indicator"
            />
          {{/if}}
        {{else}}

          {{yield}}

          {{#if this.text}}
            <span class="draco-button__text">
              {{this.text}}
            </span>
          {{/if}}

          {{#if this.icon}}
            <span class="draco-button__icon">
              <Draco::Icon @name={{this.icon}} @size={{this.iconSize}} />
            </span>
          {{/if}}

          {{#if (and this.displayExternalIcon external)}}
            <Draco::Icon
              @size={{11}}
              @name="lucide:external-link"
              class="draco-button--external-indicator"
            />
          {{/if}}
        {{/if}}
      {{/if}}
    {{/if}}
  </Draco::Interactive>
{{/let}}
