/**
 * Copyright (c) Corinvo, LLC. and its partners and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */

@use 'tokens' as *;
@use '@dracoui/primitives/index' as primitives;
@use '../../utilities/disable-selection' as *;

@mixin Input {
  .draco-input {
    @include disable-selection;
    position: relative;
    display: inline-flex;
    align-items: center;
    box-sizing: border-box;
    border-radius: $input-border-radius;
    transform: translateZ(0);
    backface-visibility: hidden;

    @media (prefers-reduced-motion: no-preference) {
      transition: transform, border-color, box-shadow, background-color;
      transition-duration: primitives.$draco-base-duration-200;
      transition-timing-function: primitives.$draco-base-easing-ease-out;
    }

    &.draco-input--depth:not(.draco-input--floating-label) { contain: layout style paint; }
    &--full-width { width: 100%; }

    &__element {
      flex: 1;
      width: 100%;
      height: 100%;
      min-width: 0;
      margin: 0;
      box-sizing: border-box;
      font: $input-font-weight $input-font-size primitives.$draco-font-sans-serif;
      background: transparent;
      border: none;
      outline: none;
      appearance: none;
      overflow: hidden;
      text-overflow: ellipsis;
      transform: translateZ(0);

      &:disabled { cursor: not-allowed; opacity: 0.6; }
    }

    &__content {
      &-before,
      &-after {
        display: flex;
        align-items: center;
        justify-content: center;
        flex-shrink: 0;
      }
    }

    &__floating-label {
      position: absolute;
      top: 37%;
      z-index: 1;
      max-width: calc(100% - 16px);
      padding: 0 4px;
      font: $input-font-weight 1em primitives.$draco-font-sans-serif;
      line-height: 1;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
      pointer-events: none;
      -webkit-user-select: none;
      user-select: none;
      transform: translateY(-20%) translateZ(0);
      transform-origin: left center;
      transition: transform, color, background-color;
      transition-duration: primitives.$draco-base-duration-200;
      transition-timing-function: primitives.$draco-base-easing-ease-out;

      &--active {
        transform: translateY(-150%) scale(0.75) translateZ(0);
        color: primitives.$draco-product-color-brand-secondary;
      }
    }
  }
}
