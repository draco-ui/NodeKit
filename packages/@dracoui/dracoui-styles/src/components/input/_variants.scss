/**
 * Copyright (c) Corinvo, LLC. and its partners and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */

@use 'sass:map';
@use 'tokens' as *;
@use '@dracoui/primitives/index' as primitives;
@use '../../utilities/disabled-state' as *;
@use '../../utilities/variant-selector' as *;

$input-variants: (
  'outline': (
    'background': var(--draco-input-outline-background),
    'foreground': var(--draco-input-outline-foreground),
    'border': $input-border-width $input-border-style var(--draco-input-outline-border),
    'background-hovered': null,
  )
);

.draco-input {
  @each $name, $variant in $input-variants {
    @include variant-selector($name) {
      color: map.get($variant, 'foreground');
      background-color: map.get($variant, 'background');
      position: relative;

      .draco-input__element {
        color: map.get($variant, 'foreground');

        &::placeholder {
          color: var(--draco-input-#{$name}-placeholder);
        }
      }

      .draco-input__floating-label {
        color: var(--draco-input-#{$name}-placeholder);
        background-color: transparent;

        &--active {
          background-color: map.get($variant, 'background');
        }
      }

      @include disabled-state {
        cursor: not-allowed;
        color: var(--draco-input-#{$name}-text-disabled);
        background-color: var(--draco-input-#{$name}-background-disabled);
        border-color: var(--draco-input-#{$name}-border-disabled);
      }

      @if map.get($variant, 'border') {
        border: map.get($variant, 'border');
      } @else {
        border: primitives.$draco-border-width-thin solid transparent;
      }

      &:not(:disabled):not([disabled]) {
        &:hover {
          border-color: var(--draco-input-#{$name}-border-hovered, var(--draco-input-#{$name}-border));
          @if map.get($variant, 'background-hovered') {
            background-color: map.get($variant, 'background-hovered');
          }
        }

        &:focus-within {
          border-color: var(--draco-input-#{$name}-border-focused);
          box-shadow: var(--draco-input-#{$name}-shadow-focused);

          .draco-input__floating-label {
            color: var(--draco-input-#{$name}-border-focused);
          }
        }
      }

      // Depth effect - inset shadow (right direction - same as button but inset)
      &.draco-input--depth.draco-input--depth-right {
        box-shadow:
          inset 2px 2px 0px 0px var(--draco-input-#{$name}-shadow, rgba(0, 0, 0, 0.1)),
          inset 3px 3px 0px 0px var(--draco-input-#{$name}-shadow, rgba(0, 0, 0, 0.05));

        &:not(:disabled):not([disabled]) {
          &:hover {
            box-shadow:
              inset 1px 1px 0px 0px var(--draco-input-#{$name}-shadow, rgba(0, 0, 0, 0.1)),
              inset 2px 2px 0px 0px var(--draco-input-#{$name}-shadow, rgba(0, 0, 0, 0.05));
          }

          &:focus-within {
            box-shadow:
              inset 2px 2px 0px 0px var(--draco-input-#{$name}-shadow-focused, var(--draco-input-#{$name}-border-focused)),
              inset 3px 3px 0px 0px var(--draco-input-#{$name}-shadow-focused, var(--draco-input-#{$name}-border-focused));
          }
        }
      }

      // Depth effect - inset shadow (center - same as button but inset)
      &.draco-input--depth.draco-input--depth-center {
        box-shadow:
          inset 0px 2px 0px 0px var(--draco-input-#{$name}-shadow, rgba(0, 0, 0, 0.1)),
          inset 0px 3px 0px 0px var(--draco-input-#{$name}-shadow, rgba(0, 0, 0, 0.05));

        &:not(:disabled):not([disabled]) {
          &:hover {
            box-shadow:
              inset 0px 1px 0px 0px var(--draco-input-#{$name}-shadow, rgba(0, 0, 0, 0.1)),
              inset 0px 2px 0px 0px var(--draco-input-#{$name}-shadow, rgba(0, 0, 0, 0.05));
          }

          &:focus-within {
            box-shadow:
              inset 0px 2px 0px 0px var(--draco-input-#{$name}-shadow-focused, var(--draco-input-#{$name}-border-focused)),
              inset 0px 3px 0px 0px var(--draco-input-#{$name}-shadow-focused, var(--draco-input-#{$name}-border-focused));
          }
        }
      }
    }
  }
}